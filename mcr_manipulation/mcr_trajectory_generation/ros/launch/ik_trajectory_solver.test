<?xml version="1.0"?>
<launch>
  <!-- Test for the youBot robot -->
  <arg name="robot" default="youbot-brsu-5"/>

  <!-- Launch robot -->
  <include file="$(find mir_bringup_sim)/robot.launch">
    <arg name="robot_env" value="empty-world"/>
    <arg name="paused" value="false" />
  </include>

  <!-- Launch MoveIt! -->
  <include file="$(find mir_moveit_youbot)/$(arg robot)/move_group.launch"/>

  <!-- Do not use namespace to avoid mismatch with Moveit! topics/services -->
  <include file="$(find mcr_trajectory_generation)/ros/launch/ik_trajectory_solver_example.launch">
    <arg name="move_group" default="move_group"/>
    <arg name="arm" default="arm_1"/>
    <arg name="reference_frame" default="base_link"/>
    <arg name="joint_names"
         default="['arm_joint_1', 'arm_joint_2', 'arm_joint_3', 'arm_joint_4', 'arm_joint_5']"/>
  </include>

  <test pkg="mcr_trajectory_generation" type="ik_trajectory_solver_test.py"
        test-name="test_ik_trajectory_solver">

    <remap from="~event_out" to="/ik_trajectory_solver/event_in"/>
    <remap from="~poses" to="/ik_trajectory_solver/poses"/>
    <remap from="~component_output" to="/ik_trajectory_solver/trajectory"/>
  </test>
</launch>